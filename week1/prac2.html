<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <title>Fetch 시작하기</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script>
            function hey() {
                let url = "http://spartacodingclub.shop/sparta_api/seoulair";
                fetch(url)
                    // 이 URL로 웹 통신을 요청한다. 괄호 안에 다른 것이 없다면 GET!
                    .then((res) => res.json())
                    // 통신 요청을 받은 데이터는 res라는 이름으로 JSON화 한다
                    .then((data) => {
                        let rows = data["RealtimeCityAir"]["row"];
                        rows.forEach((a) => {
                            // 미세먼지 데이터 리스트의 길이만큼 반복해서 하나씩 개발자 도구에서 보기
                            let gu_name = a["MSRSTE_NM"];
                            let gu_mise = a["IDEX_MVL"];
                            console.log(gu_name, gu_mise);
                        });
                    }); // JSON 형태로 바뀐 데이터를 data라는 이름으로 붙여 사용한다
            }
        </script>
    </head>

    <body>
        <button onclick="hey()">fetch 연습!</button>
    </body>
</html>
